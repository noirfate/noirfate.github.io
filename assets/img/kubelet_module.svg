<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="4251px" height="4196px" viewBox="-0.5 -0.5 4251 4196" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-08-04T03:12:19.657Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/19.0.3 Chrome/102.0.5005.63 Electron/19.0.3 Safari/537.36&quot; etag=&quot;KGUSVFz4od6YccGIgCHj&quot; version=&quot;19.0.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;NTXkSaUdDqDTP8oRYGCi&quot; name=&quot;第 1 页&quot;&gt;7X1Zc9s41vZvmQtVy6kyS7YsO75MpLg7X2d7raSXqxRFQhJiiuCApGXPr/+AcwASFKnN1kJSnOpxJG4ingOcDWdpdfuzp9+5HUw/M5d4rcuO+9TqDlqXl93bTlf8I48845G31z08MOHUxUMX6YEh/R9RBzvqaExdEmYujBjzIhpkDzrM94kTZY7ZnLN59rIx87K/GtgTkjswdGwvf/Rv6kZTNYrLm/T4H4ROpvqXL65v8czM1herkYRT22Vz41D3Q6vb54xF+Gn21CeeBE/jgvfdLTmbvBgnfrTJDYT836e///Fuo18/Lsmv28ge2H+cq6c82l6sBhxGNo/+jEfEI5E403Zmrnjmgz5wZweB+BsS/ki4NWFnanDRs0YsnNOZZ/vi23v1cMIj8rT0rS8SLMQkImxGIv4sLlE3JBNBzR+N5jwlRrenjk1NQugLbTUBJsmjU4zEBwXTFpBd5iBrXV574mffB5xkoLj+byyJ+16MPjq3PTrxW9134opfcRjR8TMApK8RnybqX3jWSB8Yx74DT03J0n4QBxRFrPdiAoWRWHytSzGejmVZZ/oZYnij9Lmd1k3ydJc+7uxNw8D2Cx9WeEtL8ATjZjmV4P7sM8fMj2BRe4wvPLN7M+50xuOih9/BfwiV5BNTkuJk/CA+PPuD4jBgkj1adphG2+DW6dzeXrn5X5swiZJ1H/vtgLn98cT6Ebh2RML22dl61HKvsH8kR7xE1JtPaUTOxWmH4NMkE3gRUcXKPeYID/qbN4PVPyKOAjPVRxdEDGex7xLJpDuaBEOkwGAuOWH3/TSaCaY+uNhUCC0XjnnJtK0k6uxNEl3mkCGu0F7UV8ajKZsw3/Y+pEffZ7FLr/nEWKAQ+0Wi6FmpYnYcsSye5IlG/6jb5ed/5Werp74NnoxTg2f9xRfj/Uc/QH4x7pJf09vgm75PMp1+wsy6N3edzt1dQlM52NVqhcCGxdwhK0BU+qmQGROyajJcF08GTjw7oo/Z99g5pbs5nUOwa6mdBQ+TjHamtYI1itkCrh34324Utm4vo69dvM0vk5tOwTJ529vXMrk6iML2KpUFqQmKS5jXXMQks52I+hMwftDYGVP5LUZJvUZM71JMrNYwYBptrNO2HyTt3iit9gxxaCdjkk+yZ5Kbw93nzhRksIQleg5IaH1jLqoqG2i8R9P7XgPYLnVGOpbYeZbHJkMw3iQ+4pnysR2feiWBa+mQFYDyOXwyanfQ3NH/nL0MlOP+6qtYBicu5dLjIdfJnaBqqI//NyZhpFnFmHrA4xTJV1L3VWu7SH2s2xTa2CrbaMkWLEYhEqMosIYRp8E3Tsb0qW3el5I5PdbXN90JSuPD2vB9QHn25keb4yMyTzg7W8I9T41BZo2SRlhIYSFlbd+jBN6qhNLiGHitRu5BrC/roz9mQ2PxfZGc+N23jwYj7rhidfvCDrvsnEtIGfxxUR+1ozhMtDvQnUHLHSEnB6D16j1JEtRx+Z6EAN2bNjTM+Hwdj8VyZQWcPVIXllv4DCbHzPbtyVpFqNwzZR+MHhC7J+gtGQqsPmugOv9pmP46FNGFvhxFcK7PbRpZX4jg/sOIBQ3jLhPjriDHW/vqI9t5mIC399wYBfVpRG2v8MXVOen4lRdGhPu2XPQz5sYeQceULd/YRW0lUuYmBTeaYr1iTLZQbCTn4LEf0RnRpiioL3GwBpQTmwOjDZcRMGrC0VB8hyxZcJyUZJ+RSG18H3WpybuX23gv4wSNLFhiAFicOIwLtcP68CiU9XFbHJKq/T0Z45x5vMAz358D8rfNffDsyhNEHg0t5RAdkigO7mxh1rvqNBeP5JzxjXZmTxB5YXoBPsM2TP8+skn1RI0kMqO1vO60LazVSLPQ+vBEo/bFaYJTVi2mMT9fIYh3Yn4+Mi8Ghacsdma5lRptNyFsprEkDqIVFd4T233G11puQeVUmmaxVYx/FnqcS+d6OPbW0quY1Ec/4kK7ccCLzIBNhTMbPMu/aCQ0ICPCgPhhrKw6sPgYOq21OQemntpplHbhnPm/Ra0k9LLEc3o5SvtUmBIa2I4Tz2IZMgRYA7Z2EHD2RGd2RLznBN3QRqgR8TFns/QUBIWwcQu3DCQB3DgxswNOGaeRfJLtu1UlRgGyCsKxTblPQjlqMh4TJ7JKPcYjeiRBXv4/WNo//Ih6IFWffeeLmDRDtcnUR7brJ4cwouYOFrfvKMnbsTpX+CnicqatlsYV5M2d3cXxlvV9XiU7nClxHlrJFqVDXa75S7pNGTA3TE86jHMSBsx3DbmC96+cKTVRrI6tKoy21MHHdhiZHOCr75B2o2PXYSrsJJtGCg5cyB6xw3WLuP6gbru+JOf7JJHrM6mHe97abcGKLbi6edNqKb+Lt+d0xFEjl0vhEQOWkGjsqF7dI7F+qDTP3hv5zRoSQVC38Y7Va7K8zhUNzgG5zd6hQWSPcOM+jsCHxtXe1umZy6t8jjP7gXz89h2w+iGA6k8Fi4QElBK4HMvnW1BhB19INGf8QQLWPr71X5Y5VQbNpWG+R2O+ylhy2CxgPm5iqMhTj7EgLLer8sW+8V0quxpJRC1grqGfduY0mkq/U0CzCU0nP2tHG/Iv6QEGMPVmK8zYxs9TYdLvhGGl3h1laPQ9OwxBdcTIQ19qR+t2k15Cx3KzxGOoo9ygQBOG39pKMS3ATrG4sm1XlWXWNQprw/91YAFqWx4dE+fZgbxxiEgW/06IT7gdMX58dl16BSvwyKQcetVBFPYdzMKZTX1lIrVkjUYOb8QcEoaolMjSH5O1nqtSFQYry2yUmp2s7ZTWVcGQjyqq/C8UVa0dVhPLVU66vb0aJE99SZWx7rZVxorLJ3X3VT6pd9QiY0lhsX+NM2uKjBl1xf41zx2vyNjlhkXGlsyFwxQZu87Vycpll7VKWXLs/KLbyVYdS6qQrVs2N1f7WjY35a86VkReVWriMKmg65TJ4zs+FVJfWGQEQ+PwUiimBEY9i6HsEoLhkoBAdBzzi2Cz4Q68NMXaVQ87vpKdaARLS7UVZZ5CiiIzs14MzWLBaVHBcruvmkLfuGQsUwJ+bMliqLNMn7WqCZMalHVPJjQUHKNd/mGsHpAjo7QcYfSG1hcy/wuSlGSIZNjXJ9qgR/frNdBPbPIZSWmO04KRf1MVVaxPgsTfmAsHqwFB0cDPqvnaeqUNSSRj+b/YM6KTzOXnio4Kt/RyXOSAoymVA+FYggrKDrSwcmT4LEggE4+w1iTjdKkTpqJCq6iuRjIdtsF1WXl96YKRiA5sYRdQHm4SK5P+MChO+Voe1dClViPPBSrc18Mr+1jWb500vOkAKazjQusSy6ImTOoZ7FIwt9DCIk9UmmbS8elwgslKtOR5g/tKVC2mzUJRqSWI7LDW1Gsg6GvSC001FDy1pYvnrifoVol6hx1VK1uhN5nfchpjoh3maoNchveo9YjBQeJR/0H7jBauxmTDl4y+WnwTFJSfSQEoU09hIRhl7cX1sLQEWB3UhkMobALYzw9CmrzzvBy4agPvptc7RUVuQ5VuPIuwEtfYqII8zhTgSgSxKbVbl73/4nDEp0fzrSToxaQQoFbA4C2RJtmowFVWgbMRO3Qm+1cm9aYalTaH1zsnioXi9FwZ7RZImsZ91kCzFZze+yhH9Xv/GOPaOXHAS54dEGx+tdOtcPHD17dvN9AQSqag7h3Ava51XasAsmjFKCKhLGh9IyCcMpc6iheoLQ+DhVJ/zPjMjqjcsV0hcKpByFeIp9E2dF6hRZuMrCAecq3K3OgVx9MrHMLFEMRqiTLVLDEZhMrr5jZU4NJ5IZ1Haou/5+djodbHnJxPINhwYWQVEL/3TJjUJCnBLLek+gYY3QFWwNqp2FqIFb2Q3cWNaNFLaWvKx3TWQ9GR73M+tmdUsDk4+wfxHkkk3n4ZVHny1IeXva70zSL1F7UXJe+NxSI1g2VzJ707qyjcdDZxJVQIfJ3ItAK/KvtADiE7l0FXajnaOBaqzO20AiDU5paqLjojM/TLze3ImZbBvbAPNsXY7G8cXw0Z00Hc5QmAij2lDS8aH/kiQbbxkWt79uvXz+kiTPzjc/ONGk/4sXlwI7COJLC4arjWkvvktvf8P6J2hpa6fDDPNWnWICtilLsqVhMMssK5jNR/l5BeGWeoQgNtpVV2n78ua4b13nZq4q/dY8DGHqfbIiFTUwcJem3PZC6muqnaOyLjcHE6GqOFwJ5x+FMD8lNzNbWvcFG5WfoKCTHaBu4VOury2VVCQ7rq4j3RcbONB/c1gnWaV2uf+d/bpLEuT7tdnv/d3TCR9eJmT4msb3OJrJl49lZZU4KvO5mU4IvOVT6V/u1FEZTX+8oJvi1/TvAibTFMK8R94FWc8viqsBrBhZXoCv4oDFBbUB2LGIPc3DTirJI6vxro5fKBqk4cNRlod8VAvXiCtXprMtarlUQ912pMuUacqEhLs8VzKVBNpvjSKSC1VcGoBmZcLFi0LJDBKUZ/YGngWveF16pr7jx7Ei65xCVjO/YidbJlhGQlb6Yj7unIlO8FO8alL8f0CmLuzAQppEJgR1Or7xEbml5mrimncVK69YIyAPOFOcRvZadz8SS+U6JDmNlw4zou2sxm49eWQ562pp+Q6BtCvHBdSY3uks7rcJvJ3MzhbedwuGrinsZkLdoiNjOgEBKlJrTPkgSoTq3zzFbv0yrtFc1jrFGZMy6X5jFVY5+2cAFWdnd2Fwx5RCENd8ZieMgyZtyhUUg8uagwbVe2l2mpqNlwanO5vy+nQcj0UQcGikXRQtj+H5FoTogP82k8Jhyr8Opf9u0ZgeKtdWf4h4hembIwku2RrM+CTvdDINAizzvFMJZXMEXmj+kk5g1fLP+L78hhIXUm5mqFaa22uj53v+FcazhXXkMzCJBqaA3f2oJvpcpczoHeMK0SvfgOmVbG0Gus7GOxrgwZGu71Wu5VsCvWMLASvfjOGViBi7Xxf5eEqxXQpuFwO+Nw6fRtmF05X3ynJqaOm93C1DSDJhoWt2MWl6fIFrslzUbCEtuzOMyn4WolevFdcDUVpJNaP8MPn6gfP32yxfGEt2ER7p+xGCgb/RJz4afMTkiqZf6UBUF/iue+C9clRdSCwYXEkxhZv5PoA1YfQTlQfU6xwLr1QIckuhMkhknRXhJ5AaWNwe1urZxUFWATG8u4KguK1YN88NjE+uiP2dCQFD/8gNNHMREmsEOYrH/VNyjViGcQyq5rX88Zf8D5UX58VjHa0j1zHy+0cNhhsecmlAxJlHIFNQMEcVqqxxROgNQiUpXMpP6wqC+k32X04eLZFSwmvRSL9ldQC6mBPrKZFFkjQsJGbjRyo5EbjdzIbBa8RFKEjXgo1RBq9eJNKvEWqcRvt00lLs5/3VtPXP1rRgLsYuowKiMSfMxOCmXRgyPlEF92dPdtnUN82Xtr5TsL924KULy87u4LxYuDpBHvsFSGWAIPWGRZk3elNKt6KYVSudleUthEuScHZCwURakZhDYU0tZrsiXLzEpVGhNT08hnZUqs11aqg4YYErR1btdpUAMkpDb5MHBQtg5t5ZOPy3FIb2ZpbRQjSNNh1ZQ02HT4mNTJH10gBZZROyFqDOORNIZ2QJTsf4W4nofq104H3wF5pM6e5vxKrNUPnwLSqZevtHwlDbY9FWosuNyRMjk2sWwOF8Tz1R64pCPcwWbyEvDN3pX1hx3n64vB32wmn58YptlIqv2JvkJlOhMjV0Os10TaHEX85eiwXaBPDal09qLBlNsniz7PpU7Z3tXGDsX9uWUvcw7F+1jSNFfYEfXkpB2U+v5Td588Xr3Hi6u3WVet9twaqF5fFaDavdwbqt2DuGlH+oCuvfY4E3/fIGVU1xgZHyco2lYs/p7YLhZEB2/dMHMUKhNELOhPTdYFP3XuTNVS57ETyZ3zm4G5ZEfpu5n76mXdWnLJGMqA89iP6IxYf9i+65E+t8Np+4A7laXyFr8ARoiseJxZkkv0PYqVKqocY1EsgRZaTGK3SJg/6ArvDz8OOH0kvOpDheaZgp7IQVBj+jzhFjAQYAwV2MY/+h546crruySknLhD2d3w6/hvxj33Gwtiz46YYoJyWwd+2A6ffWfKmc9ieUy30RAfPcaCFjanWcG8qlR2dY+IBwgvdKCdkmIStGTFH0z7WNxLEwZh0i9vJbRVFyDJOLah6LIUJc29Vk13K68LpVpP/eu9QZTgX+3Ls1yo4Hdzmv6UrVPITzb+OVczNTD4BchBw1nQKEzb4b8IPbSjQEbwZ8IC/tIdilJGcHi4S7/UORGGjEM9skxHKc8yrvrUlZYxdUILdyoIF8amZTtRbHtZodZfyoSTcwvqZcM/tllEplGujfUqDqWYFU7jSLFCl839EnHEakeHoptveXjoph6zzt48Zlcv9UOmIiDz5ZgOyd5VL+OQ7N7k8e0Vhd++3Ru8veM4JLn8+yalSuKNPAkv49ymkfXDj6jXziH0Gu2HO4niQyFi4JOwze8E5C+owSCeJS37oUdIMIh15mCxTdTw1uWsaxveWrj299Z5SncHM9Z+8eypKLe9ushu/1y9Leib9rZoV21/+z/XB2G3q3kHQPw6Vr0BlzFZ8lidXPD6H7Nl2DoY9pKvtAUOR9TZjY15Phm1O6omj/rnbD0GG9v7G8FrCDWybIaVwZ+8dmFV3i1eQGHddvsZeAW6q8FHCGxWZofqNntEvGMk2bOgJLTlHkewU2YD1yRPNMyW2bWBH9quCxnJcnch6zE3fmjM2Sx5kvLhWlUF+RAbll8FknxOQ4JrWlMI0lpAwRZU4EygCCngNsQFyG5U4t84UCT6raW7pYfwCDtKiCawQVEIN8hf6YyIY8OnahJl+czPz0Ym9761e9xlAA8mXauoLYkTfJsFQpeSt3gU0ongToltuSfvvkTnBiEFQhYkGw5/2OE7yR1kphIKVW0y4t/c185/xO3gdwzFve8J8SXbKiwVdYqgv8Ard58q/TBIHQgB3DpEmaCWRZFLrr56z841IAlmlZWfQ5ReOJ1FWyssXvjee/X93N5eDZKnvsj3c7PaN7EuLrXYL7E/L3u+oftQ8fKc50cydBkDpD68NtAXZMaQ/k/ecdndFPQtI39vugUQ9wog7u0voPowjd4TuaDdNxD5O0tjfoGuSz01FXCeb8Js1lZZHTD/t8jUWBLLNUabR/k1O6B2zsHuVLdM7UeiVXgIbRXaeuf7lIYwvWAiTO0gkI3aSsyOjxL9BrWlEOqZHYL9L3WrubBG04g4o2ce1nIPA2GX0pEHpj4EGo0Yi2RSZBCYYXIbdJA6RczHOczB9GS+mLolsDR3Hna+EHUunykfW5+480JTTIZDcJ9E4G5w9OBhBcHA+4kXIkyjyvL87pCRE3sFSfvcyz6K9ap8E/n0qshJ0xchJIQ565WD2g5oSPjjkaZ/1fF/neCTQspnHpV6/TtJGOo4U+I8SE6dbC68u+jIOJXOd+o8oPyC1/eILa8LKW4oRKiCwR/me+C0tj0PfLN6z8HXPlmtysnsLnkv4TPqw2ZmvSSinPgJbEkVeUht+0LmeKYtL/oGCR1nVr+Z+Qc1RAB7YEs4OeX393bkSMYEjaFT4wRLf0CEM2exYG9Eszf7kVF9szxrl2IDbJdYw6ghbOqOcSJ4dXvJXnpJx7R6dGjVVGwgaxiPsOFgI7FWo3Js2M2U6+ye/DcmYWSy1VY2ZnFmCX1jCMpGX0gan3gwkCpisVHyUC+fPDTUqpYOzcZtIgFfstef6mGJXqb283PoGe99QDG1HxzXihb1aAHCj4+DhaGbE9DSV5wMJDhP/iI8hJDU5cjghdajvvLEENoAGvynUsb+CzZZt9mkKg6snllKT2svWXkF4JYz2+xAEnJBFBpmSCMCsyJwhMp+JR1vWweecTJjuHviS/uc+BGn4LGk6c5AogY4WuwbJj5JEUs3W7QRPyWzOqKH1gE1NU2P+O28eqlaZlJz/emNvY46d35eZZ18C+a/RhOv+PCP7jautCAHB8uWOVFVBLYGs6SyQ1j64iqacP8DqHj23JrGNZsG9Owtl0s/eJOYqcAj8sCEyB5rzhGT4s67N9kU5IuL69sckldFeYi3ewPyML1rXuWm15QVq3mORbFa0hW/4IfnREXy6/JYtuc9r3PE73RLRR/Q0V/SwnjzO067b58+/L5VBFi1mGu6RbCHzOqJpWm7hcogOb2+EffXVLyTfMkvchdjGLGgEQXrRMHl6nK5BaKgkIHd7I2BdXOIEXdChuor49GUTZhvex/So++zmKbXyGRaheQvEkXPKjTWjgWHyeBMnmj0j7zd6qlv/xpnBk/qyfDlWX8RBvezcZP8+q95Lr0Nvun7Fmh6c9fp3N0lNJWDXS2PdFreChBVMrrgTROyajIsUQvEKrMj+ph9j91T+uaYlL4w6JxSfR2lM3ROyX48SutedWtJfXtUUr9tFvXrSd3dkNTLamUciNa3VaH1IWjW25RmS3JcDkMzndHRsOJX0PpqU1J3j0rqi8qTuvt2DbHhmzQSBGRyk6h0M+Cowrib75uQ2Noldrb0OjfWgrule5W3Vq61Tybjbunty1zpXubA3K2/JdnsUxT6b0zUNh9u4CXda1pJo4WWTu1ZLIXQgvbPSc+nfguzVyAwcpf+CPXOmZol1BdLUbCM5a+CMZsw02xMvRBWvQ/NcG3HYdyl/iTrASpjBu42ziMk6obeo/KlYB0yI3t5TICBKQ7rHlCFgICiQIDqx+9aVrIIjhH2XZO6TfsrXbEyauN3yMbE8kppquUBudqhx53ww00n/4v9ygLITyDx5AsTnsnSmFi6C9Hv2I+7HfGYlHPXuiw8FzJAEccV7YZORy5tIKE+cM74sA2gyVm4Qkz98G1Mw1a7XTJ669FIvS6N6Cof1Ll81NMBZn0Ix2ljsU43Og46pcrOq4OcD03ZLr0ViTFpgXBXqkA55XtjC5RtfR7JFuhr54uyBBiUuUQ/iPLuxJxj9Qmc9Hk/SeImqYhjZJeTHwf+/lkseZk6knKEmR20eu+j54CElswq6Yn/3ou/b75JvjAmzrPjkQ/ybmx/cPQJWBZE0W8YQAJ0gia3/QlkS8vIb1mmkiP/bcyAAgSZ7IOXgc+EzZqQ6KvntgXCjWKfBy9YjVwfuWE50DteyfcCT5LpSzfzf/ISxSdzlCY1lxerQRSo9U3I0iknZlly4o6zGaiTelH3EbrjT77yIYqS46feVUo3pXJiJId9CeRI9eoYbzYTig2oZF8toY3cBowjVIly0z1xZZklwFOD6+OgnGZWmSuAZ1YLKVolKY1ObnmUZ6HEgWsnq2LB2gDKNTP/dSlzjfQ8bVTqiEUV/FovIEvjaSy3JF1pK35UhYuxDxTPKBh2GDKHCjknjURdxtPU/KBidzhlMRiTKBNbRvRC33ampObm5BpnWT+jsRXrcoafsgQqXflkYJWcP+VDD4I1JpYj1+IHCC0oTy+m8ljXL6GbEQZjVidcBenoALbJxEJODNy3nTDrzZbHaCcTWn4sa4DQPorTnuIzK6z2Ha6sjnSGUT8ud0vGUlj+HeJhTbsSsIiygLUaNldm4pA2qEPhd3ZPqB8GUA54c3Z/IkDW0ZtQX39TI/kqNmkKaic2uxWr/S531MMuUSyOTJgyLZ6xlZBMBlMR4bhf78u4cCadNi2zy1RLt4F+JlHNnS5b2b4K29572uoNrO/PAW6rqYZVyY6zrFk5AVdXGaZqWVBt1NtG0dgzPkuaWNRNRLxIO6nVr+pmPASkGLDlltE6DGpGwE9QeVwVnhYsJowhdR2OgnRcO4CR7TxMoDbFuTEW6tOI2l7h6+sX+BjJ4GloZKB7ZFoTJu6/vOh01uBZ5dlZxiALVeV+YsFUSWpKL5a9XxTx2eL3TfDFJmR1ydiO5YkNoDsRmFYDJouEUCe0ZNrmgIaOzV2MBrI+YsesBsUNUDRTY5MGqumvfFAiIu1RAH0Hx7GnLnUR+VbSlzAtnNGBVI5UzuhnNqQpu666dIxQEvU8xJqo8mmykM5+NKBK/lTjlyrhbC5LTEoZsGjWQCG1X0iZ1v7KSS/UwHtJOenukmKGz3hPQTnp4gJtugLl7gu0XeUKtKVWaL7eXWoMvqjQHfSDV1UQL7ubIru68t21rrWtMC3sMnCjkc4W6d4bqr09l71bv8426gasyEzTenkzG9LjPDyhQvg4c0gYYg8xBxzEMp268xEcFLK/DZSjw4vV+ZZurblySR+K6awFI5pyQlIdW75+e0yl5gwp5WnX9jTDfBpFsp6++uZwoqryydjQ2EffCVNxpTMJ153Ep8RyeC1I2EgNMySRzPK9CPFVHCy6qnjsKxRUi2h7IuYUVFp0SUg5bC7IxmvpVo64xcfZBcdhbo2rjRXsTqVrAXeyECv09SXlKcd0EmtnmwGjBG/KmS+Zpb7aswHGB5/NfRPOKgOlZ4JsUfGsxn0+5rK9pe/AAVm8BErAdaCPBdi3ssBRCdqOj/QBXcbyQZLuzZ8oJc8MLtvGaETYA8467uQkaaGbFSsyfGPuDxVELucD9hyUwx6KZ/2B32rXUQV8IAX9LDlWquwkKoiWUIq5oKAqcmtUaPA7WUjfp7pduOp+KmXzA8y4OMggGCFvIs4DpMPncx+Q0auG2Yw/QCJyJZnMPmiVqAywC+MTEGiA6UhT4DdZPqAjh8Z8YdEBB2vpVk1a4Qrj8Zg6FJ17I+LYGLcArL4BO6+stlSV5Ec78YEqh31KgYtOCaTCLhHIrOckrggqdX4hczzThq9DmGUV5YCCkDDCdLiW7FfVruhwpkys5QdCAiG81lLPvBhbd1V01JqI+dFXmpj68GjxwIuK83lk0p+as+HBs+RB6+8aNootglOGMkjY2uV//dUDGcHGvNLl/VEYwCWd3CGgMsRNdN7o1f9ZGHlU6wXVhmFmP22CAgYbXnZ6JgzDWiAwtp0IfF/qPxjnZflHVTSWivJoN3GhpIxVrc8KjmYTAbPWHrwnYSBYLcWYae2cFUYfGtQendEoKYfGSci8R0u6o9YLoFMzPtCyTgBzpaGBQelT+1HZy9EUYQUrBK5QpQKoL7Chbmy0dmnwzeI7pL6Dli8YdfBHtjMGsy5x9qSBkVBwwWX+b4v2t4PV/jBE0n+eK6cG5tTVyCgEl43QG10/7CsHMslnGWcLkuW+5h5g3QMTIBwPpc8rftdq+BrXeR0XIOhLBvkJVvod4wiIPF1Z22VdN+adesPLVMb9BWChjKzBtC4qySCmumrxMoQ9NvUFwg7DNsZGry9WUHo4No+0LGhCMnygQYByHJ3f6Sac0i4rtNGwbSz7q5RN8oTpdxTUHJl4wMbH1yT3DR3asB4hQVsbIDWaGBmbKvFbDtTR9syOptZn6rfHHrOj6ytx4OkMVxQaxG/0iQSbsxqhU5D0V/oRHV1D2NMQdsHBhAUMm6MJ78KNUbA1tJknXz12ZCxUDVjbRkv+sD6UKimQaw0LbbN+FuqD4IZyC4STtjjheMx5sL6webta/HCppvmfhH7brMhlOyQGdEkaYho9k4mI6bcyO4Z9dTq//aTO4ObLdlss9VKAR5zYD1UaTk1FVn34w/EItO5HWvvLDEgC2l+RGXC1OjOgu1kM+/XNzb5i2K+XZgaY6eG7ThHYQUZAr9PLZgTcXufzLC46vQI45c37wvOmOjkBJoGFxHDTcH7x+pwKAdvKxMpjGLdLBRPQ2QCqC2Ea67xS5h5/f0MhMKGPEKOtdIzjB5O9ZjQVfvXOOz6JZ1DPoOTZ+GtHciEn0WIwBAb+96c4uk2iJ9YfstNF2Ur6Jttu8msto8LWBsk5JYf1sghWbRrsEFXNv8zwew2v5nhZfldlVLtFqEqxsNuputXsxbBp6rSSOOAaTeOrwmlsmLAK+M5yfMyr6wVOrwgcFUJ5rNkILep1n4dawFzhV+98SNp0YOaKFxqkUiorsu80/8WTOh44cTsz27cnhP8WtozOHYruje53LKJiwJXMPBp7TGab0nBhESrKMh+6eI4TIqc2SeoobCW5OqoITpLDW2WMFvrMyL25MJIsLNPgNJMl15kpV1OlR17hV+/8gQFpFG1m+ScIOAs4RVIGno2BcCrC0Ji6LgkDatBbEDaynYg6csO9ypCEdEY9m9PouWV6CzrhnKJiDQnCs2ThqnWORfGSc0kgK+zR6VKaIBOqDA6RziLVeioZXhCS2GVccDDkgdwFg6Qgj3MWexENvIXCBpKFarCrDE5WFMynxGB7egbASktQLNImP0KdBlVGeo692/vFM6zKYOmmZgvzaXEWpeUtnlkMKPgtHexsh6oEqWJJ5kqsMjQZJqIR0gBlVlfxelLRAWh2NbL1WGT8G+Pt1eQE4s2onMr9RCXisQcVTKSUCWRpAScWoic7+3FWu3Q8JjxTd7EWDAA1YhdWs+SdzBMKduVdrBV+dciFyziDTadi0kMyra9k1o1pGXV4DNUpo1RWGJv9eXc2O5RWXpGJJTIwbIEKSfFu6KZQYaRhFhp+tUXrUgWLAxLOlCBcyraESOmqj93wcCdlq7w0Y6szt6kqRIP0x2uqPuoiN3PE6WSCk94jtg+lY8DBUuHcNXPIxPZAT1CevwzJ9R4OqhBKrxvbFCUmtveRisR8SoE9K/eTPD5jFbc1j81sd3nI0d1swgIyJjNAV0A6MtFG+sDaGmJGVEbycsnd7USJ2E2FMTh1KAx2XTFnBQqQxPAdhNlisOjmd6VVPAqvfgMFPQTKn+iYQAV22KaQtBwxVpmsqkJ0i9vUVGgEuXW3Cfdc05wjxmnBApKpQLA4OzIxH2u4Tu71yovyAbIzNLvS3j7btIFCFnNHKaWG8USTWndKiYUwP5PdpWr9kWVAiZFfRFnn50O9W3AkRK21Db932KLoNYOa2Q9EcOUhjASzvqFJRrbF0dXt+vlQssZHh4Vxn1x5LwUm8nNYaYjo+Vo3ext6V4zeWLm7iHXJ3zK7PL2Q9CUhjORb/fHEkhn91BGc7ZsdYW05qX0McJyfbV9ooWEUDihPzpnPuiORsDsgbp/7BGKa7mb6psyPNoukRosk5l6REvXOWCFK1hf/Hm6SyvfCsrcBceiYgkowkrss5+eVXlt6BZwDTs3Ur9PUN/o5ZOZ9qtTCDK70/P1C5qjnvtODBVUXtPXFlC3NBO4SYFAVlilLFZv5a6bFJtnM2oqvgoPjJYVvCloM/lgIfU2sPI+FRG2hkye9BVIQWqgfVIGE1U0hwyYTUpu0vSoUkixDSm5lBMEuHCPJBuFntZVkVn90GOdQgNPFNSNjNTOO+yJ2Wp/6F0n0Zmx9DarHTA/lN063ZN4NStux+SCy6a/25Vm+/0vaokzis2B8pN+1fZ89H1tDdTx7tdrIzlwL7/Dn19GvsB3LjZvwkKUXjqFzbz7rdT7uOFK9l8KkK0+/ZabVqMZVE/iCzFHoDGGUFNTDvXWhAU+m6yd6g7ma9Bipp6O7pV2CoXzYh03CarUgZSY0YsUULSIMip4wE/mT7TCzNf62O6NhiGUQVBPElo6PfjOzn99o5wcnv4iDAeaCEqqAsZ+ehbq6VQ2TOjDoDItBm4XXIFIjYFRW3JscP8J631Do2hMYiSGk0TvXpVJ9TIRTlcZ6eF3qx7fBu+8fGnVqhTqlIKqrRnXwFYoOlGZ9brQ+7z98/vpXsz5XrU8FUbM+d7Q+78mMPTbrc9P12f/6pf/x06kv0as1S1Sj1KzSna1SR2j/1CPNOt1knQ4+fPrQ6LkrF6mCqFmhL8N4k+m6dqNE00BVcUkDR8GZYhgjRhNkyDiacNsh41g6slzpYxQW8Aka/zUzLXJcbPjhe5aFlX5YB1gz378OvuKQBkw7w+a2n0S0h3EQMI5VGMSy6h4/CfrIEQx/JtsQLoOqbFizIsUp9O0gnMJBndyq7638mjIjWqszklfR+6P/KF5YihEWpLWKMRG7w4lDKDrcl8h946ZF0f81qPx8aLq+vQg2WZQf9L7wXpZIst65KlWkrRXCA86MKsF6KNNH/n9Zcp1ZFbSOxlARxtjnz/qOXE8+F5CB7NO+zoEeyu16ULgrFoRzADVLCArG3ZYOaZwx6EwvxQeqWljzArQvNoLIWLeVJB8ivDBGG1QMXRqEqvr3xzdWKrHhqwAT2htUYZV/MMtYiHCo10RR1hcUJOlDNZKk+Jvao1cRd9psJAWkaSizEWWkqSGTJkGT5sla0L2XZXRESyXUIuiGyR4RPqO+1sxU/3GzMMMcVTWpn6f+gKn9iE8KkW0dfw3tX9G1PDuMFvm1LDYgNZA2sT4OVGkyeagqfYFKpKGeRDhyogb8p0gJwP2vdWyvSjrnBppRMqxtgF6mgtJQupW/Mfdvwa+mz21yym3kdjJjVSF9XUQNJYSt5DNgplJMaFR/KUDHWjGBQiIPpqUjJESaZWD9TiIxC98///g4ANmgWnfjLVWdZDvY6mnL+XSGr5+dU6jvLfEEFZxMtnTa4uTZ4g3q2dlbDukZOBzuO2WguY0NSbuw3eq9b/UGbx4v5PaGmL+SHjeD7ZhrFZFfqhV1CKSb1XUt70R0fBwnliCsXyzp6zEf07Ag7UDV8RYwQGk+s2RnvcTJDmJZTN6JgGZ2UQDPBTgp58K4fsQ9qUKeWFOWWVlzpkRDqJmhsc4FO6D187/CwBN/jnZRZBVXYg3syLbaYcSpPzkJRdWCqrk/goT24UdfKDaGF8fArOGAZVrKlRjCobbaWtndNbMDZB318r1pqkk1Wqqj3aQXl6+HsYb7D4fzpyrwh5my3qWs4V6BuGMJ33emsDSdUhPwRKlz7bqa7EuVH4/47RSbM1P961RZxSka8IgT+6FKw6msgN+FNT/890v/LGF8y6zyiEXQPDBzOjept4qAN+6slG57LOdnBukacc+9qVO6dW9ScklOQNkIkOaOQgBBHKTFmbAkCRbPCDgbEU7C2ItC6wuZq6uWl8jDG8QHdVP66afqJIIl827XFY+ukuvjUMZG0m1oWXCfjJHIUt7SaRFnp2WUgOaBeFn3MAEzbidzWt/Z1MOgnVqpIshKv8mRgt75oGLD46KOJlnplTb+XiYTYx/bwzynh6ovyKqg9pSJ1SzKk1PlNbpRcALVZnxnGDtYKanao5fZAJEdxcksGJLIiKdSU6StMJGJetrDqw71F53jgGeTQvACWiAhFlZt0YMrPUqQ7cmiq5PMNuiXJZ4abV0oWAlRuzf1KpGb5gsoU0yQvwKKVJm0kKz9eqo6SJhmLzVayKIWMsQpso0OovBstJCXzcWlWkiB4Vj14YI6EtYze3CpQpKMty5UPG2VRAlR8+cbhaRAIWll1Y+CxuBV0jjmUxqRc3FaN/YJOHkd1gf8qVftj+TaGW8VdlIfUY2dfHIFHTwPPsA2T63k2U4mjxFVr2BrwX4ZJvtqxwTEzjwyL4bc+FmyvTa104DxZ6jEIwNsQHVQz4xsaC5o9hU/neCnzSmpI8ceaLCwolF42Uny9MyGdgCOQ10i9HwPsuWTnHcV9qQ6Jse+JqCibb2SIIptp02CJfIAS+QDaSPBSFYsBZjm9donqnz20VIngmm3pZn09Rnk9rP9rKKTd5OMDM4X7PTdqcy5WJ6+DPmPg3C7EEj5Vb2nStmHMmfVXXkbTE9Vzw1GnTXUZLAC6AqQP2G2DKrhFK2YTb56MG6clN/L8tchFepfG3hvjWgH7MUcs7ac1SMzCtvfNpdzeWBcXv/VPZ5F+HFsyKCsltWJGKSBiX9amLebWedZ1vBH4a1Jsm80hUFe9FaE9YSysHg+clWT0Rri+YoV1jkhJvMi5aZDfEN8V4q0lSVorV48aQEc8fgQHYDX4QRxyCQ9epn5yUvoLS6UqO5ASGL0TA7RMTmYc1vKqGk088S3ixZqvv1E7RXKrvxf8tRHwsWb42Mv8FAgzd8IDxHyf5/+/se7jX79uCS/biN7YP9x3r2WF3Y/tLr92dPvhM1IxMFKxnskP5bPmVM3mqond3rq4JTQyVQ9/FK8DR61QzwySR52KX0j8BPiw+ypTzxP/yJ8vuxQd9Urvs2BRtwJGaqvsrITmzDf9j6kR99nYU2vAa6DYP4iUfQ8pP+TD7HjiGWhlp2z/5G3Wz317V/jzOBJPRm+POsvvhivcZP8+q95Lr0Nvun7cmQVNswgIasc7FKiqkOqJcJyEK/wOqHXyVafy69DgufnAyeeLWs7Zn5196S+rQqpS0Sy7tUxSXbVqQrJSrw69YXrad09Kq0vGlq/mtbd3qa0XiKaX0trmQXFpA6TnPtdKBrTz8wl8or/Dw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 2230 23 L 2230 0 L 2580 0 L 2580 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 2230 23 L 2230 120 L 2580 120 L 2580 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2230 23 L 2580 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="2404.5" y="16">startKubelet (cmd/kubelet/app/server.go)</text></g><rect x="2230" y="20" width="350" height="100" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 70px; margin-left: 2231px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><b>func startKubelet(k kubelet.Bootstrap, ...)</b> {<div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// start the kubelet</font></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">go k.Run(podCfg.Updates())</font></b></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="white-space: pre;">	</span>...<br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="2405" y="74" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">func startKubelet(k kubelet.Bootstrap, ...) {...</text></switch></g><path d="M 2055 585 L 1421.37 585" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1416.12 585 L 1423.12 581.5 L 1421.37 585 L 1423.12 588.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2055 183 L 2055 160 L 2755 160 L 2755 183" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2055 183 L 2055 1010 L 2755 1010 L 2755 183" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2055 183 L 2755 183" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="2404.5" y="176">Run (pkg/kubelet/kubelet.go)</text></g><rect x="2055" y="180" width="700" height="830" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 698px; height: 1px; padding-top: 595px; margin-left: 2056px;"><div data-drawio-colors="color: #00994D; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 153, 77); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// Run starts the kubelet reacting to config updates</font><div style="text-align: justify;"><font color="#000000"><b>func (kl *Kubelet) Run(updates &lt;-chan kubetypes.PodUpdate)</b> {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.logServer == nil {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// redirect /logs/ request to file server</font><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><b style="">kl.logServer = http.StripPrefix("/logs/", http.FileServer(http.Dir("/var/log/")))</b></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.kubeClient == nil {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>klog.InfoS("No API server defined - no node status update will be sent")</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Start the cloud provider sync manager</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.cloudResourceSyncManager != nil {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>go kl.cloudResourceSyncManager.Run(wait.NeverStop)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// <span style="background-color: initial;">initialize internal modules that do not require the container runtime to be up</span></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">if err := kl.initializeModules(); err != nil</b><font color="#000000"> {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>kl.recorder.Eventf(kl.nodeRef, v1.EventTypeWarning, events.KubeletSetupFailed, err.Error())</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>klog.ErrorS(err, "Failed to initialize internal modules")</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>os.Exit(1)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Start volume manager</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">go kl.volumeManager.Run(kl.sourcesReady, wait.NeverStop)</b></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.kubeClient != nil {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><font color="#7f00ff">// Introduce some small jittering to ensure that over time the requests won't start</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">		</span>// accumulating at approximately the same time from the set of nodes due to priority and</font></div><div style="text-align: justify;"><font color="#7f00ff">		// fairness effect.</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>go wait.JitterUntil(kl.syncNodeStatus, kl.nodeStatusUpdateFrequency, 0.04, true, wait.NeverStop)</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0); white-space: pre;">	</span><span style="color: rgb(0, 0, 0); white-space: pre;">	</span><font color="#7f00ff">// check node cidr and update pods cidr corresponding to node</font><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><b style="">go kl.fastStatusUpdateOnce()</b></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><font color="#7f00ff">// start syncing lease</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><b style="">go kl.nodeLeaseController.Run(wait.NeverStop)</b></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0); white-space: pre;">	</span><font color="#7f00ff">// check container runtime status</font><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">go wait.Until(kl.updateRuntimeUp, 5*time.Second, wait.NeverStop)</b></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Set up iptables util rules</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.makeIPTablesUtilChains {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>kl.initNetworkUtil()</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Start component sync loops.</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="white-space: pre;">	</span>// Sync pod status with apiserver<br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">kl.statusManager.Start()</b></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Start syncing RuntimeClasses if enabled</font><font color="#000000">.</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if kl.runtimeClassManager != nil {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>kl.runtimeClassManager.Start(wait.NeverStop)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><font color="#7f00ff">// Start the pod lifecycle event generator.</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">kl.pleg.Start()</b></div><div style="text-align: justify;"><span style="white-space: pre;">	</span><font color="#7f00ff">// main loop for processing changes</font><br /></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style="">kl.syncLoop(updates, kl)</b></div><div style="text-align: justify;"><font color="#000000">}</font></div></pre></div></div></div></foreignObject><text x="2405" y="599" fill="#00994D" font-family="Helvetica" font-size="12px" text-anchor="middle">// Run starts the kubelet reacting to config updates...</text></switch></g><path d="M 2405 120 L 2405 153.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2405 158.88 L 2401.5 151.88 L 2405 153.63 L 2408.5 151.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 715 238 L 715 215 L 1415 215 L 1415 238" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 715 238 L 715 955 L 1415 955 L 1415 238" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 715 238 L 1415 238" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1064.5" y="231">initializeModules (pkg/kubelet/kubelet.go)</text></g><rect x="715" y="238" width="700" height="717" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 698px; height: 1px; padding-top: 597px; margin-left: 716px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// initializeModules will initialize internal modules that do not require the container runtime to be up.</font><div style="text-align: justify;"><font color="#7f00ff">// Note that the modules here must not depend on modules that are not initialized here.</font></div><div style="text-align: justify;"><b>func (kl *Kubelet) initializeModules() error</b> {</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Prometheus metrics</font>.</div><div style="text-align: justify;"><span style="">	</span>metrics.Register(</div><div style="text-align: justify;"><span style="">		</span>collectors.NewVolumeStatsCollector(kl),</div><div style="text-align: justify;"><span style="">		</span>collectors.NewLogMetricsCollector(kl.StatsProvider.ListPodStats),</div><div style="text-align: justify;"><span style="">	</span>)</div><div style="text-align: justify;"><span style="">	</span>metrics.SetNodeName(kl.nodeName)</div><div style="text-align: justify;"><span style="">	</span>servermetrics.Register()</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Setup filesystem directories</font>.</div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">kl.setupDataDirs()</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">		</span>return err</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// If the container logs directory does not exist, create it.</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// </font><span style="background-color: initial;"><font color="#7f00ff">ContainerLogsDir = </font></span><span style="background-color: initial;"><font color="#7f00ff">/var/log/containers and all files in </font></span><span style="background-color: initial;"><font color="#7f00ff">/var/log/containers are link to /var/log/pods</font></span></div><div style="text-align: justify;"><span style="">	</span>if _, err := os.Stat(ContainerLogsDir); err != nil {</div><div style="text-align: justify;"><span style="">		</span>if err := <b><font color="#00994d">kl.os.MkdirAll(ContainerLogsDir, 0755)</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">			</span>return fmt.Errorf("failed to create directory %q: %v", ContainerLogsDir, err)</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Start the image manager.</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// Actually </font><span style="background-color: initial;"><font color="#7f00ff">imageManager = </font></span><span style="background-color: initial;"><font color="#7f00ff">realImageGCManager = </font></span><span style="background-color:"><font color="#7f00ff">images.NewImageGCManager() (kubelet.go:698)</font></span></div><div style="text-align: justify;"><span style="background-color:"><font color="#7f00ff"><span style="">	</span>// start go routine to periodically collect image information<br /></font></span></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">kl.imageManager.Start()</font></b></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Start the certificate manager if it was enabled via --feature-gates="</font><span style="background-color: initial;"><font color="#7f00ff">RotateKubeletServerCertificate=true</font></span><span style="color: rgb(127, 0, 255); background-color: initial; font-family: Helvetica;">"</span></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// serverCertificateManager = kubeletcertificate.NewKubeletServerCertificateManager (kubelet.go:705)</font></div><div style="text-align: justify;"><span style="">	</span>if kl.serverCertificateManager != nil {</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">kl.serverCertificateManager.Start()</font></b></div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Start out of memory watcher.</font></div><div style="text-align: justify;"><span style="">	</span>if kl.oomWatcher != nil {</div><div style="text-align: justify;"><span style="">		</span>if err := <b><font color="#00994d">kl.oomWatcher.Start(kl.nodeRef)</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">			</span>return fmt.Errorf("failed to start OOM watcher: %w", err)</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Start resource analyzer, periodically collect pod volume stats</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// </font><span style="background-color: initial;"><font color="#7f00ff">resourceAnalyzer = serverstats.NewResourceAnalyzer (kubelet.go:580)</font></span></div><div style="text-align: justify;"><span style="background-color: initial;"><font color="#7f00ff"><span style="">	</span>// resourceAnalyzer.Start() =&gt; </font></span><span style="background-color: initial;"><font color="#7f00ff">fsResourceAnalyzer.Start() in fs_resource_analyzer.go:61</font></span></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">kl.resourceAnalyzer.Start()</font></b></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>return nil</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="1065" y="600" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// initializeModules will initialize internal modules that do not require the container runtime to be up....</text></switch></g><path d="M 660 1043 L 660 1020 L 1470 1020 L 1470 1043" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 660 1043 L 660 1780 L 1470 1780 L 1470 1043" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 660 1043 L 1470 1043" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1064.5" y="1036">setupDataDirs (pkg/kubelet/kubelet.go)</text></g><rect x="660" y="1043" width="810" height="740" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 808px; height: 1px; padding-top: 1413px; margin-left: 661px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// setupDataDirs creates:</font><div style="text-align: justify;"><font color="#7f00ff">// 1.  the root directory</font></div><div style="text-align: justify;"><font color="#7f00ff">// 2.  the pods directory</font></div><div style="text-align: justify;"><font color="#7f00ff">// 3.  the plugins directory</font></div><div style="text-align: justify;"><font color="#7f00ff">// 4.  the pod-resources directory</font></div><div style="text-align: justify;"><b>func (kl *Kubelet) setupDataDirs() error</b> {</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// kl.rootDirectory = options.KubeletServer.RootDirectory = KubeletFlags.RootDirectory = defaultRootDir = "/var/lib/kubelet"</font><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">kl.rootDirectory = path.Clean(kl.rootDirectory)</font></b></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// pluginRegistrationDir = /var/lib/kubelet/plugins_registry</font><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">pluginRegistrationDir := kl.getPluginsRegistrationDir()</font></b></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// pluginsDir = /var/lib/kubelet/plugins</font><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">pluginsDir := kl.getPluginsDir()</font></b></div><div style="text-align: justify;"><span style="">	</span>if err := os.MkdirAll(kl.getRootDir(), 0750); err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error creating root directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// bind mount /var/lib/kubelet itself and make it shared, so it can be used between different mount namespaces</font><br /></div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">kl.hostutil.MakeRShared(kl.getRootDir())</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error configuring root directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// kl.getPodsDir() = /var/lib/kubelet/pods</font><br /></div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">os.MkdirAll(kl.getPodsDir(), 0750)</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error creating pods directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// kl.getPluginsDir() = /var/lib/kubelet/plugins</font><br /></div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">os.MkdirAll(kl.getPluginsDir(), 0750)</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error creating plugins directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// kl.getPluginsRegistrationDir() = /var/lib/kubelet/plugins_registry</font><br /></div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">os.MkdirAll(kl.getPluginsRegistrationDir(), 0750)</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error creating plugins registry directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// kl.getPodResourcesDir() = /var/lib/kubelet/pod-resources</font><br /></div><div style="text-align: justify;"><span style="">	</span>if err := <b><font color="#00994d">os.MkdirAll(kl.getPodResourcesDir()</font></b>, 0750); err != nil {</div><div style="text-align: justify;"><span style="">		</span>return fmt.Errorf("error creating podresources directory: %v", err)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// KubeletPluginsDirSELinuxLabel = system_u:object_r:container_file_t:s0</font><br /></div><div style="text-align: justify;"><span style="">	</span>if selinux.GetEnabled() {</div><div style="text-align: justify;"><span style="">		</span>err := selinux.SetFileLabel(pluginRegistrationDir, config.KubeletPluginsDirSELinuxLabel)</div><div style="text-align: justify;"><span style="">		</span>if err != nil {</div><div style="text-align: justify;"><span style="">			</span>klog.InfoS("Unprivileged containerized plugins might not work, </div><div style="text-align: justify;"><span style="">	</span><span style="">	</span><span style="">	<span style="">	</span></span>could not set selinux context on plugin registration dir", "path", pluginRegistrationDir, "err", err)</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span>err = selinux.SetFileLabel(pluginsDir, config.KubeletPluginsDirSELinuxLabel)</div><div style="text-align: justify;"><span style="">		</span>if err != nil {</div><div style="text-align: justify;"><span style="">			</span>klog.InfoS("Unprivileged containerized plugins might not work, </div><div style="text-align: justify;"><span style="">	</span><span style="">	</span><span style="">	<span style="">	</span></span>could not set selinux context on plugins dir", "path", pluginsDir, "err", err)</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span>return nil</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="1065" y="1417" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// setupDataDirs creates:...</text></switch></g><path d="M 0 1261.5 L 0 1238.5 L 570 1238.5 L 570 1261.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 1261.5 L 0 1501.5 L 570 1501.5 L 570 1261.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 1261.5 L 570 1261.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="284.5" y="1254.5">pkg/kubelet/config/defaults.go</text></g><rect x="0" y="1293" width="570" height="240" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 568px; height: 1px; padding-top: 1413px; margin-left: 1px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><span style="background-color: initial;">package config</span><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="background-color: initial;">// Defines sane defaults for the kubelet config.</span></div><div style="text-align: justify;"><span style="background-color: initial;">const (</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletPodsDirName                = "pods"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletVolumesDirName              = "volumes"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletVolumeSubpathsDirName           = "volume-subpaths"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletVolumeDevicesDirName           = "volumeDevices"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletPluginsDirName              = "plugins"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletPluginsRegistrationDirName         = "plugins_registry"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletContainersDirName             = "containers"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletPluginContainersDirName          = "plugin-containers"</span></div><div style="text-align: justify;"><span style="background-color: initial;">DefaultKubeletPodResourcesDirName            = "pod-resources"</span></div><div style="text-align: justify;"><span style="background-color: initial;">KubeletPluginsDirSELinuxLabel              = "system_u:object_r:container_file_t:s0"</span></div><div style="text-align: justify;"><span style="background-color: initial;">)</span></div></pre></div></div></div></foreignObject><text x="285" y="1417" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">package config...</text></switch></g><path d="M 3500 23 L 3500 0 L 4140 0 L 4140 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3500 23 L 3500 320 L 4140 320 L 4140 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3500 23 L 4140 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3819.5" y="16">Run (pkg/kubelet/volumemanager/volume_manager.go)</text></g><rect x="3500" y="20" width="640" height="300" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 638px; height: 1px; padding-top: 170px; margin-left: 3501px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><b>func (vm *volumeManager) Run(sourcesReady config.SourcesReady, stopCh &lt;-chan struct{})</b> {<div style="text-align: justify;"><span style="">	</span>defer runtime.HandleCrash()</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>if vm.kubeClient != nil {</div><div style="text-align: justify;"><span style="">		</span>// start informer for CSIDriver</div><div style="text-align: justify;"><span style="">		</span>go vm.volumePluginMgr.Run(stopCh)</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// desiredStateOfWorldPopulator runs an asynchronous periodic loop to<br /></font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// populate the desiredStateOfWorld using the kubelet PodManager</font><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">go vm.desiredStateOfWorldPopulator.Run(sourcesReady, stopCh)</font></b></div><div style="text-align: justify;"><span style="">	</span>klog.V(2).InfoS("The desired_state_of_world populator starts")</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>klog.InfoS("Starting Kubelet Volume Manager")</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">go vm.reconciler.Run(stopCh)</font></b></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>metrics.Register(vm.actualStateOfWorld, vm.desiredStateOfWorld, vm.volumePluginMgr)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>&lt;-stopCh</div><div style="text-align: justify;"><span style="">	</span>klog.InfoS("Shutting down Kubelet Volume Manager")</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="3820" y="174" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">func (vm *volumeManager) Run(sourcesReady config.SourcesReady, stopCh &lt;-chan struct{}) {...</text></switch></g><path d="M 3565 373 L 3565 350 L 4075 350 L 4075 373" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3565 373 L 3565 430 L 4075 430 L 4075 373" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3565 373 L 4075 373" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3819.5" y="366">Run (pkg/kubelet/volumemanager/reconciler/reconciler.go)</text></g><rect x="3565" y="370" width="510" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 508px; height: 1px; padding-top: 400px; margin-left: 3566px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><b>func (rc *reconciler) Run(stopCh &lt;-chan struct{})</b> {<div style="text-align: justify;"><span style="">	</span>wait.Until(<b><font color="#00994d">rc.reconciliationLoopFunc()</font></b>, rc.loopSleepDuration, stopCh)</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="3820" y="404" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">func (rc *reconciler) Run(stopCh &lt;-chan struct{}) {...</text></switch></g><path d="M 3430 486 L 3430 463 L 4210 463 L 4210 486" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3430 486 L 3430 683 L 4210 683 L 4210 486" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3430 486 L 4210 486" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3819.5" y="479">reconciliationLoopFunc (pkg/kubelet/volumemanager/reconciler/reconciler.go)</text></g><rect x="3431" y="483" width="780" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 778px; height: 1px; padding-top: 583px; margin-left: 3432px;"><div data-drawio-colors="color: #00994D; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 153, 77); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#000000"><b>func (rc *reconciler) reconciliationLoopFunc()</b> func() {</font><div style="text-align: justify;"><font color="#000000"><span style="">	</span>return func() {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span><b style="">rc.reconcile()</b></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><font color="#7f00ff">		// Sync the state with the reality once after all existing pods are added to the desired state from all sources.</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">		</span>// Otherwise, the reconstruct process may clean up pods' volumes that are still in use because</font></div><div style="text-align: justify;"><font color="#7f00ff">		// desired state of world does not contain a complete list of pods.</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>if rc.populatorHasAddedPods() &amp;&amp; !rc.StatesHasBeenSynced() {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>klog.InfoS("Reconciler: start to sync state")</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">			</span><b style="">rc.sync()</b></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000">}</font></div></pre></div></div></div></foreignObject><text x="3821" y="587" fill="#00994D" font-family="Helvetica" font-size="12px" text-anchor="middle">func (rc *reconciler) reconciliationLoopFunc() func() {...</text></switch></g><path d="M 3500 733 L 3500 710 L 4250 710 L 4250 733" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3500 733 L 3500 1250 L 4250 1250 L 4250 733" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3500 733 L 4250 733" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3874.5" y="726">Start (pkg/kubelet/status/status_manager.go)</text></g><rect x="3500" y="730" width="750" height="520" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 748px; height: 1px; padding-top: 990px; margin-left: 3501px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><b>func (m *manager) Start()</b> {<div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Don't start the status manager if we don't have a client. This will happen</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// on the master, where the kubelet is responsible for bootstrapping the pods</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// of the master components.</font></div><div style="text-align: justify;"><span style="">	</span>if m.kubeClient == nil {</div><div style="text-align: justify;"><span style="">		</span>klog.InfoS("Kubernetes client is nil, not starting status manager")</div><div style="text-align: justify;"><span style="">		</span>return</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>klog.InfoS("Starting to sync pod status with apiserver")</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">//nolint:staticcheck // SA1015 Ticker can leak since this is only called once and doesn't handle termination.</font></div><div style="text-align: justify;"><span style="">	</span>syncTicker := time.NewTicker(syncPeriod).C</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// syncPod and syncBatch share the same go routine to avoid sync races.</font></div><div style="text-align: justify;"><span style="">	</span>go wait.Forever(func() {</div><div style="text-align: justify;"><span style="">		</span>for {</div><div style="text-align: justify;"><span style="">			</span>select {</div><div style="text-align: justify;"><span style="">			</span>case syncRequest := &lt;-m.podStatusChannel:</div><div style="text-align: justify;"><span style="">				</span>klog.V(5).InfoS("Status Manager: syncing pod with status from podStatusChannel",</div><div style="text-align: justify;"><span style="">					</span>"podUID", syncRequest.podUID,</div><div style="text-align: justify;"><span style="">					</span>"statusVersion", syncRequest.status.version,</div><div style="text-align: justify;"><span style="">					</span>"status", syncRequest.status.status)</div><div style="text-align: justify;"><span style="">				</span><b><font color="#00994d">m.syncPod(syncRequest.podUID, syncRequest.status)</font></b></div><div style="text-align: justify;"><span style="">			</span>case &lt;-syncTicker:</div><div style="text-align: justify;"><span style="">				</span>klog.V(5).InfoS("Status Manager: syncing batch")</div><div style="text-align: justify;"><span style="">				</span>// remove any entries in the status channel since the batch will handle them</div><div style="text-align: justify;"><span style="">				</span>for i := len(m.podStatusChannel); i &gt; 0; i-- {</div><div style="text-align: justify;"><span style="">					</span>&lt;-m.podStatusChannel</div><div style="text-align: justify;"><span style="">				</span>}</div><div style="text-align: justify;"><span style="">				</span><b><font color="#00994d">m.syncBatch()</font></b></div><div style="text-align: justify;"><span style="">			</span>}</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span>}, 0)</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="3875" y="994" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">func (m *manager) Start() {...</text></switch></g><path d="M 1645 1172 L 1645 1149 L 2055 1149 L 2055 1172" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 1172 L 1645 1239 L 2055 1239 L 2055 1172" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 1172 L 2055 1172" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1849.5" y="1165">Start (pkg/kubelet/pleg/generic.go)</text></g><rect x="1645" y="1169" width="410" height="70" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 408px; height: 1px; padding-top: 1204px; margin-left: 1646px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// Start spawns a goroutine to relist periodically.</font><div style="text-align: justify;"><b>func (g *GenericPLEG) Start()</b> {</div><div style="text-align: justify;"><span style="">	</span>go wait.Until(<b><font color="#00994d">g.relist</font></b>, g.relistPeriod, wait.NeverStop)</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="1850" y="1208" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// Start spawns a goroutine to relist periodically....</text></switch></g><path d="M 1065 955 L 1065 1013.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1065 1018.88 L 1061.5 1011.88 L 1065 1013.63 L 1068.5 1011.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 570 1413 L 653.63 1413" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 658.88 1413 L 651.88 1416.5 L 653.63 1413 L 651.88 1409.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3820 320 L 3820 343.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3820 348.88 L 3816.5 341.88 L 3820 343.63 L 3823.5 341.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3820 430 L 3820 450 L 3820 443 L 3820 456.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3820 461.88 L 3816.5 454.88 L 3820 456.63 L 3823.5 454.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2755 595 L 3127.5 595 L 3127.5 170 L 3493.63 170" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3498.88 170 L 3491.88 173.5 L 3493.63 170 L 3491.88 166.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2755 595 L 3127.5 595 L 3127.5 1009.8 L 3493.63 1009.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3498.88 1009.76 L 3491.88 1013.26 L 3493.63 1009.76 L 3491.88 1006.26 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1512.5 1343 L 1512.5 1320 L 2187.5 1320 L 2187.5 1343" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1512.5 1343 L 1512.5 2270 L 2187.5 2270 L 2187.5 1343" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1512.5 1343 L 2187.5 1343" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1849.5" y="1336">relist (pkg/kubelet/pleg/generic.go)</text></g><rect x="1512.5" y="1340" width="675" height="930" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 673px; height: 1px; padding-top: 1805px; margin-left: 1514px;"><div data-drawio-colors="color: #7F00FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(127, 0, 255); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;">// relist queries the container runtime for list of pods/containers, compare<div style="text-align: justify;">// with the internal pods/containers, and generates events accordingly.</div><div style="text-align: justify;"><font color="#000000"><b>func (g *GenericPLEG) relist()</b> {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>klog.V(5).InfoS("GenericPLEG: Relisting")</font></div><div style="text-align: justify;"><span style="">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span>// Get all the pods.</div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style=""><font color="#00994d">podList, err := g.runtime.GetPods(true)</font></b></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>if err != nil {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>klog.ErrorS(err, "GenericPLEG: Unable to retrieve pods")</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>return</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>...<br /></font></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><b style=""><font color="#00994d">pods := kubecontainer.Pods(podList)</font></b></div><div style="text-align: justify;"><span style="">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span>// Compare the old and the current pods, and generate events.</div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>eventsByPodID := map[types.UID][]*PodLifecycleEvent{}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>for pid := range g.podRecords {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>oldPod := g.podRecords.getOld(pid)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>pod := g.podRecords.getCurrent(pid)</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">		</span>// Get all containers in the old and the new pod.</div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>allContainers := getContainersFromPods(oldPod, pod)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>for _, container := range allContainers {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">			</span><b style=""><font color="#00994d">events := computeEvents(oldPod, pod, &amp;container.ID)</font></b></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>for _, e := range events {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">				</span><b style=""><font color="#00994d">updateEvents(eventsByPodID, e)</font></b></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><br /></font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span>// If there are events associated with a pod, we should update the podCache.</div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>for pid, events := range eventsByPodID {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>pod := g.podRecords.getCurrent(pid)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>if g.cacheEnabled() {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">			</span><font color="#000000">if err := </font><b style=""><font color="#00994d">g.updateCache(pod, pid)</font></b><font color="#000000">; err != nil {</font></div><div style="text-align: justify;"><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><span style="">				</span>continue</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>} else {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">				</span>delete(g.podsToReinspect, pid)</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>}</font></div><div style="text-align: justify;"><span style="">	</span><span style="">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>for i := range events {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">			</span>// Filter out events that are not reliable and no other components use yet.</div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>if events[i].Type == ContainerChanged {</font></div><div style="text-align: justify;"><font color="#000000"><span style="">				</span>continue</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>select {</font></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">	</span><span style="color: rgb(0, 0, 0);">	</span><span style="color: rgb(0, 0, 0);">	</span>// send event to syncLoop, it will consume it at <span style="background-color: initial;">syncLoopIteration kubelet.go:2100</span></div><div style="text-align: justify;"><span style="color: rgb(0, 0, 0);">			</span><b style=""><font color="#00994d">case g.eventChannel &lt;- events[i]:</font></b></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>default:</font></div><div style="text-align: justify;"><font color="#000000"><span style="">				</span>metrics.PLEGDiscardEvents.Inc()</font></div><div style="text-align: justify;"><font color="#000000"><span style="">				</span>klog.ErrorS(nil, "Event channel is full, discard this relist() cycle event")</font></div><div style="text-align: justify;"><font color="#000000"><span style="">			</span>}</font></div><div style="text-align: justify;"><span style="white-space: pre;">	</span><span style="white-space: pre;">	</span><span style="white-space: pre;">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000"><span style="">		</span>}</font></div><div style="text-align: justify;"><font color="#000000"><span style="">	</span>}</font></div><div style="text-align: justify;"><span style="white-space: pre;">	</span>...<br /></div><div style="text-align: justify;"><font color="#000000">}</font></div></pre></div></div></div></foreignObject><text x="1850" y="1809" fill="#7F00FF" font-family="Helvetica" font-size="12px" text-anchor="middle">// relist queries the container runtime for list of pods/containers, compare...</text></switch></g><path d="M 2690 1172 L 2690 1149 L 3410 1149 L 3410 1172" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2690 1172 L 2690 1849 L 3410 1849 L 3410 1172" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2690 1172 L 3410 1172" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3049.5" y="1165">syncLoop (pkg/kubelet/kubelet.go)</text></g><rect x="2690" y="1172" width="720" height="677" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 718px; height: 1px; padding-top: 1511px; margin-left: 2691px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// syncLoop is the main loop for processing changes. It watches for changes from</font><div style="text-align: justify;"><font color="#7f00ff">// three channels (file, apiserver, and http) and creates a union of them. For</font></div><div style="text-align: justify;"><font color="#7f00ff">// any new change seen, will run a sync against desired state and running state. If</font></div><div style="text-align: justify;"><font color="#7f00ff">// no changes are seen to the configuration, will synchronize the last known desired</font></div><div style="text-align: justify;"><font color="#7f00ff">// state every sync-frequency seconds. Never returns.</font></div><div style="text-align: justify;"><b>func (kl *Kubelet) syncLoop(updates &lt;-chan kubetypes.PodUpdate, handler SyncHandler)</b> {</div><div style="text-align: justify;"><span style="">	</span>klog.InfoS("Starting kubelet main sync loop")</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// The syncTicker wakes up kubelet to checks if there are any pod workers</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// that need to be sync'd. A one-second period is sufficient because the</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// sync interval is defaulted to 10s.</font></div><div style="text-align: justify;"><span style="">	</span>syncTicker := time.NewTicker(time.Second)</div><div style="text-align: justify;"><span style="">	</span>defer syncTicker.Stop()</div><div style="text-align: justify;"><span style="">	</span>housekeepingTicker := time.NewTicker(housekeepingPeriod)</div><div style="text-align: justify;"><span style="">	</span>defer housekeepingTicker.Stop()</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">plegCh := kl.pleg.Watch()</font></b></div><div style="text-align: justify;"><span style="">	</span>const (</div><div style="text-align: justify;"><span style="">		</span>base   = 100 * time.Millisecond</div><div style="text-align: justify;"><span style="">		</span>max    = 5 * time.Second</div><div style="text-align: justify;"><span style="">		</span>factor   = 2</div><div style="text-align: justify;"><span style="">	</span>)</div><div style="text-align: justify;"><span style="">	</span>duration := base</div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// Responsible for checking limits in resolv.conf</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// The limits do not have anything to do with individual pods</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span>// Since this is called in syncLoop, we don't need to call it anywhere else</font></div><div style="text-align: justify;"><span style="">	</span>if kl.dnsConfigurer != nil &amp;&amp; kl.dnsConfigurer.ResolverConfig != "" {</div><div style="text-align: justify;"><span style="">		</span>kl.dnsConfigurer.CheckLimitsForResolvConf()</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span>for {</div><div style="text-align: justify;"><span style="">		</span>if err := kl.runtimeState.runtimeErrors(); err != nil {</div><div style="text-align: justify;"><span style="">			</span>klog.ErrorS(err, "Skipping pod synchronization")</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// exponential backoff</font></div><div style="text-align: justify;"><span style="">			</span>time.Sleep(duration)</div><div style="text-align: justify;"><span style="">			</span>duration = time.Duration(math.Min(float64(max), factor*float64(duration)))</div><div style="text-align: justify;"><span style="">			</span>continue</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span><font color="#7f00ff">// reset backoff if we have a success</font></div><div style="text-align: justify;"><span style="">		</span>duration = base</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">		</span>kl.syncLoopMonitor.Store(kl.clock.Now())</div><div style="text-align: justify;"><span style="">		</span>if !<b><font color="#00994d">kl.syncLoopIteration(updates, handler, syncTicker.C, housekeepingTicker.C, plegCh)</font></b> {</div><div style="text-align: justify;"><span style="">			</span>break</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span>kl.syncLoopMonitor.Store(kl.clock.Now())</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="3050" y="1514" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// syncLoop is the main loop for processing changes. It watches for changes from...</text></switch></g><path d="M 2525 1963 L 2525 1940 L 3575 1940 L 3575 1963" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2525 1963 L 2525 4190 L 3575 4190 L 3575 1963" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2525 1963 L 3575 1963" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3049.5" y="1956">syncLoopIteration (pkg/kubelet/kubelet.go)</text></g><rect x="2525" y="1960" width="1050" height="2230" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1048px; height: 1px; padding-top: 3075px; margin-left: 2526px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><pre style="text-align: justify;"><font color="#7f00ff">// syncLoopIteration reads from various channels and dispatches pods to the</font><div style="text-align: justify;"><font color="#7f00ff">// given handler.</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// Arguments:</font></div><div style="text-align: justify;"><font color="#7f00ff">// 1.  configCh:       a channel to read config events from</font></div><div style="text-align: justify;"><font color="#7f00ff">// 2.  handler:        the SyncHandler to dispatch pods to</font></div><div style="text-align: justify;"><font color="#7f00ff">// 3.  syncCh:         a channel to read periodic sync events from</font></div><div style="text-align: justify;"><font color="#7f00ff">// 4.  housekeepingCh: a channel to read housekeeping events from</font></div><div style="text-align: justify;"><font color="#7f00ff">// 5.  plegCh:         a channel to read PLEG updates from</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// Events are also read from the kubelet liveness manager's update channel.</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// The workflow is to read from one of the channels, handle that event, and</font></div><div style="text-align: justify;"><font color="#7f00ff">// update the timestamp in the sync loop monitor.</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// Here is an appropriate place to note that despite the syntactical</font></div><div style="text-align: justify;"><font color="#7f00ff">// similarity to the switch statement, the case statements in a select are</font></div><div style="text-align: justify;"><font color="#7f00ff">// evaluated in a pseudorandom order if there are multiple channels ready to</font></div><div style="text-align: justify;"><font color="#7f00ff">// read from when the select is evaluated.  In other words, case statements</font></div><div style="text-align: justify;"><font color="#7f00ff">// are evaluated in random order, and you can not assume that the case</font></div><div style="text-align: justify;"><font color="#7f00ff">// statements evaluate in order if multiple channels have events.</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// With that in mind, in truly no particular order, the different channels</font></div><div style="text-align: justify;"><font color="#7f00ff">// are handled as follows:</font></div><div style="text-align: justify;"><font color="#7f00ff">//</font></div><div style="text-align: justify;"><font color="#7f00ff">// * configCh: dispatch the pods for the config change to the appropriate</font></div><div style="text-align: justify;"><font color="#7f00ff">//             handler callback for the event type</font></div><div style="text-align: justify;"><font color="#7f00ff">// * plegCh: update the runtime cache; sync pod</font></div><div style="text-align: justify;"><font color="#7f00ff">// * syncCh: sync all pods waiting for sync</font></div><div style="text-align: justify;"><font color="#7f00ff">// * housekeepingCh: trigger cleanup of pods</font></div><div style="text-align: justify;"><font color="#7f00ff">// * health manager: sync pods that have failed or in which one or more</font></div><div style="text-align: justify;"><font color="#7f00ff">//                     containers have failed health checks</font></div><div style="text-align: justify;"><b>func (kl *Kubelet) syncLoopIteration</b>(configCh &lt;-chan kubetypes.PodUpdate, handler SyncHandler,</div><div style="text-align: justify;"><span style="">	</span>syncCh &lt;-chan time.Time, housekeepingCh &lt;-chan time.Time, plegCh &lt;-chan *pleg.PodLifecycleEvent) bool {</div><div style="text-align: justify;"><span style="">	</span>select {</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case u, open := &lt;-configCh:</font></b></div><div style="text-align: justify;"><span style="">		</span><font color="#7f00ff">// Update from a config source; dispatch it to the right handler callback</font></div><div style="text-align: justify;"><span style="">		</span><font color="#7f00ff">// config source is created at </font><span style="background-color: initial;"><font color="#7f00ff">makePodSourceConfig() kubelet.go:249</font></span></div><div style="text-align: justify;"><span style="background-color: initial;"><font color="#7f00ff"><span style="">	</span><span style="">	</span>// config source contains: </font></span></div><div style="text-align: justify;"><span style="background-color: initial;"><font color="#7f00ff"><span style="">	</span><span style="">	</span>// file config source in default: </font></span><span style="background-color: initial;"><font color="#7f00ff">kubeCfg.StaticPodPath = DefaultManifestsDir = "/etc/kubernetes/manifests"</font></span></div><div style="text-align: justify;"><span style="background-color: initial;"><font color="#7f00ff"><span style="">	</span><span style="">	</span>// url config source: default is "", can be specified by --</font></span><span style="background-color: initial;"><font color="#7f00ff">manifest-url</font></span></div><div style="text-align: justify;"><span style="background-color: initial;"><font color="#7f00ff"><span style="">	</span><span style="">	</span>// apiserver source: created by </font></span><span style="background-color: initial;"><font color="#7f00ff">NewSourceApiserver() at pkg/kubelet/config/apiserver.go:37</font></span></div><div style="text-align: justify;"><span style="">		</span>if !open {</div><div style="text-align: justify;"><span style="">			</span>klog.ErrorS(nil, "Update channel is closed, exiting the sync loop")</div><div style="text-align: justify;"><span style="">			</span>return false</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span><span style="">	</span><font color="#7f00ff">// call podManager to do corresponding action</font><br /></div><div style="text-align: justify;"><span style="">		</span>switch u.Op {</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">case kubetypes.ADD:</font></b></div><div style="text-align: justify;"><span style="">			</span>klog.V(2).InfoS("SyncLoop ADD", "source", u.Source, "pods", klog.KObjs(u.Pods))</div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// After restarting, kubelet will get all existing pods through</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// ADD as if they are new pods. These pods will then go through the</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// admission process and *may* be rejected. This can be resolved</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// once we have checkpointing.</font></div><div style="text-align: justify;"><span style="">			</span>handler.HandlePodAdditions(u.Pods)</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">case kubetypes.UPDATE:</font></b></div><div style="text-align: justify;"><span style="">			</span>klog.V(2).InfoS("SyncLoop UPDATE", "source", u.Source, "pods", klog.KObjs(u.Pods))</div><div style="text-align: justify;"><span style="">			</span>handler.HandlePodUpdates(u.Pods)</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">case kubetypes.REMOVE:</font></b></div><div style="text-align: justify;"><span style="">			</span>klog.V(2).InfoS("SyncLoop REMOVE", "source", u.Source, "pods", klog.KObjs(u.Pods))</div><div style="text-align: justify;"><span style="">			</span>handler.HandlePodRemoves(u.Pods)</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">case kubetypes.RECONCILE:</font></b></div><div style="text-align: justify;"><span style="">			</span>klog.V(4).InfoS("SyncLoop RECONCILE", "source", u.Source, "pods", klog.KObjs(u.Pods))</div><div style="text-align: justify;"><span style="">			</span>handler.HandlePodReconcile(u.Pods)</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">case kubetypes.DELETE:</font></b></div><div style="text-align: justify;"><span style="">			</span>klog.V(2).InfoS("SyncLoop DELETE", "source", u.Source, "pods", klog.KObjs(u.Pods))</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// DELETE is treated as a UPDATE because of graceful deletion.</font></div><div style="text-align: justify;"><span style="">			</span>handler.HandlePodUpdates(u.Pods)</div><div style="text-align: justify;"><span style="">		</span>case kubetypes.SET:</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// TODO: Do we want to support this?</font></div><div style="text-align: justify;"><span style="">			</span>klog.ErrorS(nil, "Kubelet does not support snapshot update")</div><div style="text-align: justify;"><span style="">		</span>default:</div><div style="text-align: justify;"><span style="">			</span>klog.ErrorS(nil, "Invalid operation type received", "operation", u.Op)</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">		</span>kl.sourcesReady.AddSource(u.Source)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case e := &lt;-plegCh:</font></b></div><div style="text-align: justify;"><span style="">		</span>if e.Type == pleg.ContainerStarted {</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// record the most recent time we observed a container start for this pod.</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// this lets us selectively invalidate the runtimeCache when processing a delete for this pod</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// to make sure we don't miss handling graceful termination for containers we reported as having started.</font></div><div style="text-align: justify;"><span style="">			</span>kl.lastContainerStartedTime.Add(e.ID, time.Now())</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span><span style="">	</span><font color="#7f00ff">// e.Type != pleg.ContainerRemoved</font><br /></div><div style="text-align: justify;"><span style="">		</span>if <b><font color="#00994d">isSyncPodWorthy(e)</font></b> {</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// PLEG event for a pod; sync it.</font></div><div style="text-align: justify;"><span style="">			</span>if pod, ok := kl.podManager.GetPodByUID(e.ID); ok {</div><div style="text-align: justify;"><span style="">				</span>klog.V(2).InfoS("SyncLoop (PLEG): event for pod", "pod", klog.KObj(pod), "event", e)</div><div style="text-align: justify;"><span style="">				</span><b><font color="#00994d">handler.HandlePodSyncs([]*v1.Pod{pod})</font></b></div><div style="text-align: justify;"><span style="">			</span>} else {</div><div style="text-align: justify;"><span style="">				</span><font color="#7f00ff">// If the pod no longer exists, ignore the event.</font></div><div style="text-align: justify;"><span style="">				</span>klog.V(4).InfoS("SyncLoop (PLEG): pod does not exist, ignore irrelevant event", "event", e)</div><div style="text-align: justify;"><span style="">			</span>}</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">		</span>if e.Type == pleg.ContainerDied {</div><div style="text-align: justify;"><span style="">			</span>if containerID, ok := e.Data.(string); ok {</div><div style="text-align: justify;"><span style="">				</span>kl.cleanUpContainersInPod(e.ID, containerID)</div><div style="text-align: justify;"><span style="">			</span>}</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case &lt;-syncCh:</font></b></div><div style="text-align: justify;"><span style="">		</span><font color="#7f00ff">// syncCh is a timer</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">	</span><span style="">	</span>// Sync pods waiting for sync</font></div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">podsToSync := kl.getPodsToSync()</font></b></div><div style="text-align: justify;"><span style="">		</span>if len(podsToSync) == 0 {</div><div style="text-align: justify;"><span style="">			</span>break</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span>klog.V(4).InfoS("SyncLoop (SYNC) pods", "total", len(podsToSync), "pods", klog.KObjs(podsToSync))</div><div style="text-align: justify;"><span style="">		</span><b><font color="#00994d">handler.HandlePodSyncs(podsToSync)</font></b></div><div style="text-align: justify;"><span style="">	</span><font color="#7f00ff">// livenessManager, readinessManager, startupManager all are proberesults.NewManager() at pkg/kubelet/prober/results/results_manager.go:99</font><br /></div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case update := &lt;-kl.livenessManager.Updates():</font></b></div><div style="text-align: justify;"><span style="">		</span>if update.Result == proberesults.Failure {</div><div style="text-align: justify;"><span style="">			</span>handleProbeSync(kl, update, handler, "liveness", "unhealthy")</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case update := &lt;-kl.readinessManager.Updates():</font></b></div><div style="text-align: justify;"><span style="">		</span>ready := update.Result == proberesults.Success</div><div style="text-align: justify;"><span style="">		</span>kl.statusManager.SetContainerReadiness(update.PodUID, update.ContainerID, ready)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">		</span>status := ""</div><div style="text-align: justify;"><span style="">		</span>if ready {</div><div style="text-align: justify;"><span style="">			</span>status = "ready"</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span>handleProbeSync(kl, update, handler, "readiness", status)</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case update := &lt;-kl.startupManager.Updates():</font></b></div><div style="text-align: justify;"><span style="">		</span>started := update.Result == proberesults.Success</div><div style="text-align: justify;"><span style="">		</span>kl.statusManager.SetContainerStartup(update.PodUID, update.ContainerID, started)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="">		</span>status := "unhealthy"</div><div style="text-align: justify;"><span style="">		</span>if started {</div><div style="text-align: justify;"><span style="">			</span>status = "started"</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">		</span>handleProbeSync(kl, update, handler, "startup", status)</div><div style="text-align: justify;"><span style="">	</span><b><font color="#00994d">case &lt;-housekeepingCh:</font></b></div><div style="text-align: justify;"><span style="white-space: pre;">	</span><span style="white-space: pre;">	</span><font color="#7f00ff">// housekeepingCh is a timer</font><br /></div><div style="text-align: justify;"><span style="">		</span>if !kl.sourcesReady.AllReady() {</div><div style="text-align: justify;"><span style="">			</span><font color="#7f00ff">// If the sources aren't ready or volume manager has not yet synced the states,</font></div><div style="text-align: justify;"><font color="#7f00ff"><span style="">			</span>// skip housekeeping, as we may accidentally delete pods from unready sources.</font></div><div style="text-align: justify;"><span style="">			</span>klog.V(4).InfoS("SyncLoop (housekeeping, skipped): sources aren't ready yet")</div><div style="text-align: justify;"><span style="">		</span>} else {</div><div style="text-align: justify;"><span style="">			</span>start := time.Now()</div><div style="text-align: justify;"><span style="">			</span>klog.V(4).InfoS("SyncLoop (housekeeping)")</div><div style="text-align: justify;"><span style="">			</span>if err := <b><font color="#00994d">handler.HandlePodCleanups()</font></b>; err != nil {</div><div style="text-align: justify;"><span style="">				</span>klog.ErrorS(err, "Failed cleaning pods")</div><div style="text-align: justify;"><span style="">			</span>}</div><div style="text-align: justify;"><span style="">			</span>duration := time.Since(start)</div><div style="text-align: justify;"><span style="">			</span>if duration &gt; housekeepingWarningDuration {</div><div style="text-align: justify;"><span style="">				</span>klog.ErrorS(fmt.Errorf("housekeeping took too long"), "Housekeeping took longer than 15s", "seconds", duration.Seconds())</div><div style="text-align: justify;"><span style="">			</span>}</div><div style="text-align: justify;"><span style="">			</span>klog.V(4).InfoS("SyncLoop (housekeeping) end")</div><div style="text-align: justify;"><span style="">		</span>}</div><div style="text-align: justify;"><span style="">	</span>}</div><div style="text-align: justify;"><span style="">	</span>return true</div><div style="text-align: justify;">}</div></pre></div></div></div></foreignObject><text x="3050" y="3079" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// syncLoopIteration reads from various channels and dispatches pods to the...</text></switch></g><path d="M 2405 1010 L 2405 1079.5 L 1850 1079.5 L 1850 1142.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1850 1147.88 L 1846.5 1140.88 L 1850 1142.63 L 1853.5 1140.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2405 1010 L 2405 1079.5 L 3050 1079.5 L 3050 1142.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3050 1147.88 L 3046.5 1140.88 L 3050 1142.63 L 3053.5 1140.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1850 1239 L 1850 1313.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1850 1318.88 L 1846.5 1311.88 L 1850 1313.63 L 1853.5 1311.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3050 1849 L 3050 1933.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3050 1938.88 L 3046.5 1931.88 L 3050 1933.63 L 3053.5 1931.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>